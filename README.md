# arch-install
Скрипт установки Arch linux для опытных пользователей, знакомых с процедурой установки и системы и синтаксисом bash-скриптов
Данный скрипт для автоматического разворачивания системы

## Состав
По завершению работы скрипта установится системя с ядром [linux](https://wiki.archlinux.org/index.php/Kernel_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)).

##### Состав

**Консоль** <br />
​	`zsh` - консольная оболочка<br />
​	`vim` - консольный текстовый редактор

**Экранный менеджер**
​	`SDDM`

**Рабочая среда**
​	`plasma`

**Прочее**<br />
​	`konsole` - эмулятор консоли<br />
​	`pacaur` - помощник AUR, который минимизирует взаимодействие с пользователем<br />
​	`baobab` - программа для графического анализа дерева каталогов<br />
​	`partitionmanager` - менеджер дисков<br />
​	`ark` - архиватор<br />
​	`spectacle` - утилита захвата скриншота<br />
​	`octopi` - Мощный интерфейс Pacman с использованием библиотек Qt<br />
​	`firefox` - web броузер от mozilla.org<br />
​	`okular` - программа для просмотра документов<br />
​	`audacious` - легкий, продвинутый аудиоплеер, ориентированный на качество звука<br />
​	`vlc` - видео проигрыватель<br />
​	`cheese` - захват фотографий и видео с веб-камеры с использованием графических эффектов<br />
​	`gwenview` - Быстрый и простой в использовании просмотрщик изображений<br />
​	`git` - быстрая распределенная система контроля версий<br />
	`samba` - SMB файловый сервер и домен используемый в Windows <br />
	`kcalc` - KDE калькулятор

**Скрыто**
​	`thunderbird` `VirtualBox` `qtcreator` `cmake` `kdevelop` `audacity` `kdenlive` `gimp` `blender` `qbittorrent` `okteta` `wine` `TeamViewer`<br />
**P.S.** Код установки данных программ присутствует в скрипте, но он закомментирован. 

##### Разбиение диска на разделы
| Диск | Точка монтирования | Размер | Тип FS | Примечание |
| - | - | :-: | :-: | :-: |
| `/dev/sda1` | `swap` | 2Гб | *swap* | Можно не создовать<br />Не рекомендуется создавать более 2Гб |
| `/dev/sda2` | `/boot/` | 100Мб | *EFI/FAT32* | Увеличить если будет больше одной системы |
| `/dev/sda3` | `/` | >=10Гб | *ext4* | |
| `/dev/sda4` | `/home/` | >4Гб | *ext4* | |

## 1. Загрузка скрипта
Загрузить скрипт командой
```bash
wget get.io/wget-arch-install
sh wget-arch-install
```
В результате загрузятся следующие скрипты
```bash
install    # Подгатовка к установке Arch-Linux
install-vb # Подгатовка к установке Arch-Linux на VirtualBox с диском 40Гб
chroot     # Установка Arch и драйверов и дополнительных программ
chroot-nv  # Установка Arch с настроенными драйверами nvidia PRIME Render Offload
chroot-vb  # Установка Arch на виртуальную машину
ru.sh      # Руссификация консоли
```
Чтобы выбрать другой скрипт для изменить `chroot` на `chroot-vb` или `chroot-nv` в скрипте **install**
```bash
echo ">> Установка"
arch-chroot /mnt sh -c "$(cat chroot)" $username $hostname
```
## 2. Настройка скриптов
Прежде чем приступить к настройке необходимо руссифицировать Arch выполните команду
```bash
./ru.sh
```
Вся дальнейшая настройка выполняется редактированием файлов **install** и **chroot**
Настройка имени пользователя и пароля вынесено в начало скрипта **install**
```bash
echo '--------------------------------------------------'
echo '| Config Install                                 |'
echo '--------------------------------------------------'
username="user"
hostname="HOST"
pass='123'
```
Замените *user*, *pass* и *HOST* на имя пользователя, пароль и имя компьютера соответственно.
**P.S.** Для root и пользовательской учетной записи пароль устанавливается одинаковый.

**Форматирование и подключение дисков**
```bash
echo 'label: gpt' | sfdisk /dev/sda #Создать новую таблицу разделов GPT
echo 'size=2G,   type=0657FD6D-A4AB-43C4-84E5-0933C84B4F4F' | sfdisk -a /dev/sda #swap
echo 'size=100M, type=C12A7328-F81F-11D2-BA4B-00A0C93EC93B' | sfdisk -a /dev/sda #/boot
echo 'size=20G,  type=4F68BCE3-E8CD-4DB1-96E7-FBCAF984B709' | sfdisk -a /dev/sda #/
echo 'size=40G,  type=933AC7E1-2EB4-4F13-B844-0E14E2AEF915' | sfdisk -a /dev/sda #/home

```
**P.S.** чтобы последний раздел занимал все оставшееся пространство диска укажите размер превосходящий размер оставшегося свободного пространства на диска

***Основные типы разделов***

| Код<br />MBR | Идентификаторы (GUID) GPT | Типы разделов |
| -: | :-: | - |
| `ef` | `C12A7328-F81F-11D2-BA4B-00A0C93EC93B` | EFI |
| `82` | `0657FD6D-A4AB-43C4-84E5-0933C84B4F4F` | linux SWAP  |
| | `4F68BCE3-E8CD-4DB1-96E7-FBCAF984B709` | Корень linux |
| `83` | `0FC63DAF-8483-4772-8E79-3D69D8477DE4` | linux |
| | `933AC7E1-2EB4-4F13-B844-0E14E2AEF915` | linux home |
| `b` | `EBD0A0A2-B9E5-4433-87C0-68B6B72699C7` | Microsoft |
| `5` | | Расширенный раздел для MBR |

Типы разделов на [English](https://en.wikipedia.org/wiki/GUID_Partition_Table#Partition_type_GUIDs) и [Русском](https://ru.wikipedia.org/wiki/%D0%A2%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D0%B0_%D1%80%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB%D0%BE%D0%B2_GUID)

[Типы разделов MBR](https://ru.wikipedia.org/wiki/%D0%93%D0%BB%D0%B0%D0%B2%D0%BD%D0%B0%D1%8F_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BE%D1%87%D0%BD%D0%B0%D1%8F_%D0%B7%D0%B0%D0%BF%D0%B8%D1%81%D1%8C#%D0%9A%D0%BE%D0%B4_%D1%82%D0%B8%D0%BF%D0%B0_%D1%80%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB%D0%B0)

***Другие настройки вынесны в файл*** **chroot**.

```bash
# Разблокировка и обновление x32 библиотек'
# 1 -установить, 0 -не устанавливать
x86=0

# Наcтройка загрузчика
# efi - установка и настройка только UEFI загрузчика
# grub - установка и настройка grub без UEFI
# efigrub - установка и настройка grub с поддержкой UEFI
bootmgr=grub
# Установка поддержки микрокода для процессоров
# amd, intel
ucode=intel
```

## 3. Установка
Запустите скрипт **install**
```bash
./install
```
